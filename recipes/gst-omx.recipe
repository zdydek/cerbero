# -*- Mode: Python -*- vi:si:et:sw=4:sts=4:ts=4:syntax=python

class Recipe(recipe.Recipe):
    name = 'gst-omx'
    version = '1.4.4'
    stype = SourceType.GIT
    remotes = { 'origin': 'https://cgit.freedesktop.org/gstreamer/gst-omx/' }
    commit = 'da68e6adbf32160be2dc4c05f1757f80699704b6'
    patches = ['gst-omx/0001-Fix-OMX-TICKS.patch', 'gst-omx/0002-Additional-fixes-for-1.4.4-gstreamer.patch']
    licenses = [License.LGPLv2_1Plus]
    config_sh = "LDFLAGS='-L/opt/vc/lib -lEGL -lGLESv2 -lbcm_host -lpthread' CFLAGS='-I/opt/vc/include -I/opt/vc/include/IL -I/opt/vc/include/interface/vcos/pthreads -I/opt/vc/include/interface/vmcs_host/linux' ./autogen.sh --with-omx-header-path=/opt/vc/include/IL --with-omx-target=rpi --enable-static --enable-shared --disable-introspection --disable-gtk-doc"
    deps = ['gstreamer-1.0', 'gst-plugins-bad-1.0']
    use_system_libs = True

    files_plugins_codecs = [
             'lib/gstreamer-1.0/libgstomx%(mext)s',
    ]

